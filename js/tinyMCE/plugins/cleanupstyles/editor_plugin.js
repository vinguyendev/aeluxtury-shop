(function(){tinymce.create("tinymce.plugins.CleanUpStyles",{_InvalidStyles:"",init:function(a,b){var c=this;c._InvalidStyles=a.getParam("invalid_styles","");if(c._InvalidStyles.length>0){c._InvalidStyles=","+c._InvalidStyles+","}a.onExecCommand.add(function(d,f,e,g){if(f=="mceCleanup"){c._TinyMCECleanupStyles(d)}});a.onSetContent.add(function(d,e){c._CleanupStyles(d,e)});a.onGetContent.add(function(d,e){c._CleanupStyles(d,e)})},_CleanupStyles:function(c,h){var e=this;var b,a;var f=c.dom.getRoot().getElementsByTagName("*");for(i=0;i<f.length;i++){b=c.dom.getAttrib(f[i],"style","");if(b.length>0){var g=b.split(";");a="";for(j=0;j<g.length;j++){var d=g[j].replace(/^ */,"").replace(/ *$/,"");if(d.length>0){d=d.replace(/^([-a-zA-Z]+)\s*:\s*(.*)$/,function(l,k,m){return e._VerifyStyles(l,k,m)});if(d.length>0){a+=d}}}if(a!=b){if(a.length>0){c.dom.setAttrib(f[i],"style",a)}else{c.dom.setAttrib(f[i],"style","")}}}}},_VerifyStyles:function(b,a,c){if(this._InvalidStyles.indexOf(","+a.toLowerCase()+",")>=0){return""}else{return a.toLowerCase()+": "+c.toLowerCase()+";"}},getInfo:function(){return{longname:"Clean up styles plug in",author:"Chad Killingsworth",authorurl:"http://www.missouristate.edu/web/",version:"1.0"}}});tinymce.PluginManager.add("cleanupstyles",tinymce.plugins.CleanUpStyles)})();